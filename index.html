<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Diamond Soul Downloader</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="do_not_modify/clverify.css">
</head>
<body>
  <div class="app-container">
    <!-- Top URL Bar -->
    <div class="url-bar">
      <input type="text" id="cid-input" placeholder="Enter IPFS path (ipfs://...) or CID (e.g., Qm... or bafy...)" />
      <button id="load-btn">Load</button>
      <button id="options-btn" class="options-btn">Options</button>
    </div>

    <!-- Main Content Area -->
    <div class="main-content">
      <!-- Sidebar with File Tree -->
      <div class="sidebar">
        <div class="sidebar-header">
          <h2>Files</h2>
        </div>
        <div id="file-tree" class="file-tree"></div>
      </div>

      <!-- Central Panel -->
      <div class="central-panel">
        <div id="loading-panel" class="loading-panel hidden">
          <div class="loading-header">
            <h3>Loading and Verifying IPFS File</h3>
            <button id="cancel-load-btn" class="cancel-load-btn">Cancel</button>
          </div>
          <div id="gateway-status" class="gateway-status"></div>
          <div id="verification-status" class="verification-status"></div>
          <div id="install-section" class="install-section hidden">
            <div class="install-message">All verification steps passed. Ready to install.</div>
            <div class="install-actions">
              <button id="install-btn" class="install-btn">Install</button>
              <a id="install-clverify" cid="" mode="dark" global="true" gateway="https://chainletter.mypinata.cloud/ipfs/" api="staging-verify.clstamp.com" logo="true" class="blockchain-verify-btn">Blockchain Verify</a>
            </div>
          </div>
        </div>

        <div id="file-preview" class="file-preview hidden">
          <div class="preview-header">
            <h3 id="preview-title">File Preview</h3>
            <div class="preview-actions">
              <button id="reverify-btn" class="reverify-btn">Reverify</button>
              <a id="preview-clverify" cid="" mode="dark" global="true" gateway="https://chainletter.mypinata.cloud/ipfs/" api="staging-verify.clstamp.com" logo="true" class="blockchain-verify-btn">Blockchain Verify</a>
            </div>
          </div>
          <div id="skill-metadata" class="skill-metadata hidden"></div>
          <div id="preview-content" class="preview-content"></div>
          <div id="cid-display" class="cid-display"></div>
        </div>

        <div id="empty-state" class="empty-state">
          <p>Enter an IPFS CID above to load a file, or select a file from the sidebar.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Context Menu -->
  <div id="context-menu" class="context-menu hidden">
    <div class="context-menu-item" id="toggle-active">Activate/Deactivate</div>
    <div class="context-menu-item" id="delete-file">Delete File</div>
    <div class="context-menu-item" id="add-tag">Add Tag</div>
  </div>

  <!-- Tag Input Modal -->
  <div id="tag-modal" class="modal hidden">
    <div class="modal-content">
      <h3>Add Tag</h3>
      <input type="text" id="tag-input" placeholder="Enter tag name" />
      <div class="modal-buttons">
        <button id="tag-submit">Add</button>
        <button id="tag-cancel">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Options Modal -->
  <div id="options-modal" class="modal hidden">
    <div class="modal-content">
      <h3>Options</h3>
      <div class="options-section">
        <label for="skills-folder-input">Skills Folder:</label>
        <div class="folder-input-group">
          <input type="text" id="skills-folder-input" readonly placeholder="Select skills folder" />
          <button id="browse-folder-btn">Browse</button>
        </div>
        <p class="options-help">Files activated from the file tree will be copied to this folder as {CID}.MD</p>
      </div>
      <div class="modal-buttons">
        <button id="options-save">Save</button>
        <button id="options-cancel">Cancel</button>
      </div>
    </div>
  </div>

  <script src="do_not_modify/clverify.js"></script>
  <script src="renderer.js"></script>
</body>
</html>
